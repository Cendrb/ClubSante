<% case @data[:mode] %>
    <% when :template %>
	    $(".calendar_template_exercise[data-id=<%= @data[:object].id %>]").replaceWith("<%= escape_javascript(render partial: "exercises/exercise", locals: { exercise: @data[:exercise_result], beginning_offset: @data[:beginning_offset] }) %>");
    <% when :modification %>
        $(".calendar_modification_exercise[data-id=<%= @data[:object].id %>]").replaceWith("<%= escape_javascript(render partial: "exercises/exercise", locals: { exercise: @data[:exercise_result], beginning_offset: @data[:beginning_offset] }) %>");
    <% else %>
        alert("ERROR: This view cannot render different views other than template and modification!");
<% end %>

setupHandlersForExercise(<%= @data[:exercise_result].id %>);
$('#ticket_selector').dialog("close");
$('.admin_edit_dialog').dialog("close");
refreshTicketsBar(<%= @data[:exercise_result].timetable.calendar.therapy.id %>);
